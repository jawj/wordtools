/*! For license information please see 111.app.js.LICENSE.txt */
(()=>{"use strict";const e=Symbol("Comlink.proxy"),t=Symbol("Comlink.endpoint"),n=Symbol("Comlink.releaseProxy"),r=Symbol("Comlink.finalizer"),o=Symbol("Comlink.thrown"),a=e=>"object"==typeof e&&null!==e||"function"==typeof e,i=new Map([["proxy",{canHandle:t=>a(t)&&t[e],serialize(e){const{port1:t,port2:n}=new MessageChannel;return u(e,t),[n,[n]]},deserialize:e=>(e.start(),p(e,[],undefined))}],["throw",{canHandle:e=>a(e)&&o in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function u(t,n=globalThis,a=["*"]){n.addEventListener("message",(function i(s){if(!s||!s.data)return;if(!function(e,t){for(const n of e){if(t===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}return!1}(a,s.origin))return void console.warn(`Invalid origin '${s.origin}' for comlink proxy`);const{id:l,type:f,path:h}=Object.assign({path:[]},s.data),p=(s.data.argumentList||[]).map(b);let d;try{const n=h.slice(0,-1).reduce(((e,t)=>e[t]),t),r=h.reduce(((e,t)=>e[t]),t);switch(f){case"GET":d=r;break;case"SET":n[h.slice(-1)[0]]=b(s.data.value),d=!0;break;case"APPLY":d=r.apply(n,p);break;case"CONSTRUCT":d=function(t){return Object.assign(t,{[e]:!0})}(new r(...p));break;case"ENDPOINT":{const{port1:e,port2:n}=new MessageChannel;u(t,n),d=function(e,t){return y.set(e,t),e}(e,[e])}break;case"RELEASE":d=void 0;break;default:return}}catch(e){d={value:e,[o]:0}}Promise.resolve(d).catch((e=>({value:e,[o]:0}))).then((e=>{const[o,a]=v(e);n.postMessage(Object.assign(Object.assign({},o),{id:l}),a),"RELEASE"===f&&(n.removeEventListener("message",i),c(n),r in t&&"function"==typeof t[r]&&t[r]())})).catch((e=>{const[t,r]=v({value:new TypeError("Unserializable return value"),[o]:0});n.postMessage(Object.assign(Object.assign({},t),{id:l}),r)}))})),n.start&&n.start()}function c(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function s(e){if(e)throw new Error("Proxy has been released and is not useable")}function l(e){return g(e,{type:"RELEASE"}).then((()=>{c(e)}))}const f=new WeakMap,h="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(f.get(e)||0)-1;f.set(e,t),0===t&&l(e)}));function p(e,r=[],o=function(){}){let a=!1;const i=new Proxy(o,{get(t,o){if(s(a),o===n)return()=>{!function(e){h&&h.unregister(e)}(i),l(e),a=!0};if("then"===o){if(0===r.length)return{then:()=>i};const t=g(e,{type:"GET",path:r.map((e=>e.toString()))}).then(b);return t.then.bind(t)}return p(e,[...r,o])},set(t,n,o){s(a);const[i,u]=v(o);return g(e,{type:"SET",path:[...r,n].map((e=>e.toString())),value:i},u).then(b)},apply(n,o,i){s(a);const u=r[r.length-1];if(u===t)return g(e,{type:"ENDPOINT"}).then(b);if("bind"===u)return p(e,r.slice(0,-1));const[c,l]=d(i);return g(e,{type:"APPLY",path:r.map((e=>e.toString())),argumentList:c},l).then(b)},construct(t,n){s(a);const[o,i]=d(n);return g(e,{type:"CONSTRUCT",path:r.map((e=>e.toString())),argumentList:o},i).then(b)}});return function(e,t){const n=(f.get(t)||0)+1;f.set(t,n),h&&h.register(e,t,e)}(i,e),i}function d(e){const t=e.map(v);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const y=new WeakMap;function v(e){for(const[t,n]of i)if(n.canHandle(e)){const[r,o]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},o]}return[{type:"RAW",value:e},y.get(e)||[]]}function b(e){switch(e.type){case"HANDLER":return i.get(e.name).deserialize(e.value);case"RAW":return e.value}}function g(e,t,n){return new Promise((r=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===o&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),n)}))}var w,m=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},x=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function E(){return m(this,void 0,void 0,(function(){return x(this,(function(e){switch(e.label){case 0:return void 0!==w?[3,3]:[4,fetch("words.json")];case 1:return[4,e.sent().json()];case 2:w=e.sent(),e.label=3;case 3:return[2]}}))}))}function k(){return m(this,void 0,void 0,(function(){return x(this,(function(e){switch(e.label){case 0:return[4,E()];case 1:return e.sent(),[2,w]}}))}))}var S,R=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},T=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function A(e){return R(this,void 0,void 0,(function(){var t,n,r,o,a,i;return T(this,(function(u){switch(u.label){case 0:return t=e.startsWith("~"),n=t?e:e.toLowerCase().replace(/[^a-z.?*]/g,""),r=t?new RegExp(e.slice(1),"i"):new RegExp("^"+n.replace(/[*]/g,".*").replace(/[?]/g,".")+"$"),[4,k()];case 1:for(i in o=u.sent(),a=[],o)r.test(i)&&a.push(i);return[2,a]}}))}))}var j,L=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},P=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},C=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},M=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},O=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},z=function(e){return e.split("").sort().join("")};function N(){return L(this,void 0,void 0,(function(){var e,t;return P(this,(function(n){switch(n.label){case 0:return j?[3,2]:(console.log("Generating anagram data structures ..."),j={},[4,k()]);case 1:for(e in n.sent())t=z(e),j[t]||(j[t]=[]),j[t].push(e);console.log("Generated"),n.label=2;case 2:return[2,j]}}))}))}function G(e){return 16843009*((e=(858993459&(e=(0|e)-(e>>>1&1431655765)))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24}function W(e,t,n,r){var o,a,i,u,c,s,l,f,h;return void 0===n&&(n=-1),void 0===r&&(r=0),P(this,(function(p){switch(p.label){case 0:if(n===e)return[2];o=!1;try{for(a=C(t),i=a.next();!i.done;i=a.next())if(u=i.value,0!=(c=r>>u[0]&u[1])&&(s=(1<<G(c))-1,c!==s)){o=!0;break}}catch(e){f={error:e}}finally{try{i&&!i.done&&(h=a.return)&&h.call(a)}finally{if(f)throw f.error}}return o?[3,5]:[4,r];case 1:p.sent(),l=n+1,p.label=2;case 2:return l<e?[5,C(W(e,t,l,r|1<<l))]:[3,5];case 3:p.sent(),p.label=4;case 4:return l++,[3,2];case 5:return[2]}}))}function D(e){var t,n,r,o,a,i,u;return P(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,7]),t=C(W(e.length,function(e){for(var t,n=/(.)\1+/g,r=[];t=n.exec(e);){var o=t.index,a=t[0].length;r.push([o,(1<<a)-1])}return r}(e))),n=t.next(),c.label=1;case 1:return n.done?[3,4]:0===(r=n.value)?[3,3]:(o=function(e,t){for(var n=["",""],r=0,o=e.length;r<o;r++)n[t&1<<r?0:1]+=e.charAt(r);return n}(e,r),o[0]<=o[1]?[4,o]:[3,3]);case 2:c.sent(),c.label=3;case 3:return n=t.next(),[3,1];case 4:return[3,7];case 5:return a=c.sent(),i={error:a},[3,7];case 6:try{n&&!n.done&&(u=t.return)&&u.call(t)}finally{if(i)throw i.error}return[7];case 7:return[2]}}))}var H=function(e,t){return e.reduce((function(e,n){return Math.min(e,t[n])}),1/0)},I=0;function F(e,t,n,r,o,a,i,u,c){return void 0===i&&(i=[]),void 0===u&&(u=[]),void 0===c&&(c={nextReport:Date.now()+r}),L(this,void 0,void 0,(function(){var s,l,f,h,p,d,y,v,b,g,w,m,x,E,k,S,R,T,A,j,L,z,N,G,W,H,U,Y,$,_,q,X,B;return P(this,(function(P){switch(P.label){case 0:if(t<=1&&(s=a[e]))try{for(l=C(s),f=l.next();!f.done;f=l.next())if(h=f.value,u.length>0)try{for(H=void 0,p=C(u),d=p.next();!d.done;d=p.next())z=d.value,i.push(O(O([],M(z),!1),[h],!1))}catch(e){H={error:e}}finally{try{d&&!d.done&&(U=p.return)&&U.call(p)}finally{if(H)throw H.error}}else i.push([h])}catch(e){G={error:e}}finally{try{f&&!f.done&&(W=l.return)&&W.call(l)}finally{if(G)throw G.error}}if(!(n>1))return[3,10];P.label=1;case 1:P.trys.push([1,8,9,10]),y=C(D(e)),v=y.next(),P.label=2;case 2:return v.done?[3,7]:(b=M(v.value,2),g=b[0],w=b[1],I++,(m=a[g])?I%100!=0?[3,4]:(x=Date.now())>c.nextReport?(E=i.length,k=E>0?i[E-1].join(" "):void 0,[4,o(I,E,k)]):[3,4]:[3,6]);case 3:if(!P.sent())return[2,i];c.nextReport=x+r,P.label=4;case 4:S=[];try{for(_=void 0,R=C(m),T=R.next();!T.done;T=R.next())if(A=T.value,u.length>0)try{for(X=void 0,j=C(u),L=j.next();!L.done;L=j.next())z=L.value,S.push(O(O([],M(z),!1),[A],!1))}catch(e){X={error:e}}finally{try{L&&!L.done&&(B=j.return)&&B.call(j)}finally{if(X)throw X.error}}else S.push([A])}catch(e){_={error:e}}finally{try{T&&!T.done&&(q=R.return)&&q.call(R)}finally{if(_)throw _.error}}return[4,F(w,t-1,n-1,r,o,a,i,S,c)];case 5:P.sent(),P.label=6;case 6:return v=y.next(),[3,2];case 7:return[3,10];case 8:return N=P.sent(),Y={error:N},[3,10];case 9:try{v&&!v.done&&($=y.return)&&$.call(y)}finally{if(Y)throw Y.error}return[7];case 10:return[2,i]}}))}))}var U={wordsMatchingPattern:function(e,t,n,r,o){return R(this,void 0,void 0,(function(){var a,i,u,c,s;return T(this,(function(l){switch(l.label){case 0:return l.trys.push([0,4,,5]),(null==S?void 0:S.pattern)!==e?[3,1]:(i=S.results,[3,3]);case 1:return[4,A(e)];case 2:i=l.sent(),l.label=3;case 3:return a=i,[3,5];case 4:return u=l.sent(),a=[u.message],S={pattern:e,order:t,direction:n,results:a},[2,{count:-1,results:a}];case 5:return(null==S?void 0:S.pattern)===e&&S.order===t?[3,7]:[4,k()];case 6:return c=l.sent(),s="asc"===n?1:-1,a.sort("freq"===t?function(e,t){return s*(c[e]-c[t])}:"length"===t?function(e,t){return s*(e.length-t.length||c[t]-c[e])}:function(e,t){return s*e.localeCompare(t)}),[3,8];case 7:S.direction!==n&&a.reverse(),l.label=8;case 8:return S={pattern:e,order:t,direction:n,results:a},[2,{count:a.length,results:a.slice(r,r+o)}]}}))}))},findAnagrams:function(e,t,n,r,o){return L(this,void 0,void 0,(function(){var a,i,u,c;return P(this,(function(s){switch(s.label){case 0:return I=0,a=z(function(e){return e.toLowerCase().replace(/[^a-z]+/g,"")}(e)),[4,N()];case 1:return i=s.sent(),[4,F(a,t,n,r,o,i)];case 2:return u=s.sent(),[4,k()];case 3:return c=s.sent(),u.sort((function(e,t){return H(t,c)-H(e,c)})),[2,u]}}))}))},loadWordWeights:E,getWordsCount:function(){return m(this,void 0,void 0,(function(){return x(this,(function(e){switch(e.label){case 0:return[4,E()];case 1:return e.sent(),[2,Object.keys(w).length]}}))}))}};u(U)})();